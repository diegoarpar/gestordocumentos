version: '2'
services:
  # activiti tomcat
  activiti-app:
    build: 
      context: ./
      dockerfile: Dockerfile
    image: activiti-tomcat:06052020_1
    ports:
      - "8888:8080"
    depends_on:
      - activiti-mysql
    networks:
      - activiti-network

  # activiti phpmyadmin
  activiti-phpmyadmin:
    image: phpmyadmin/phpmyadmin:5.0.2-fpm-alpine
    environment:
      MYSQL_ROOT_PASSWORD: "activiti"
      PMA_HOST: activiti-mysql
      PMA_PORT: 3306
    ports:
      - "82:80"
    depends_on:
      - activiti-mysql
    networks:
      - activiti-network

  # activiti database
  activiti-mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: "activiti"
      MYSQL_USER: "activiti"
      MYSQL_PASSWORD: "activiti"
      MYSQL_DATABASE: "activiti6ui"
    volumes:
      - ./db:/var/lib/mysql
    ports:
     - "0.0.0.0:3306:3306"
    networks:
      - activiti-network
 
networks:
  activiti-network:
    driver: bridge
